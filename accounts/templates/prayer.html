{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="description" content="TRU MSA">
        <meta name="author" content="Shams Khan">
        <title>TRU MSA</title>
        <link rel="icon" href="{% static 'imgs/My project.png' %}" type="image/png">
        <link rel="stylesheet" href="{% static 'vendors/themify-icons/css/themify-icons.css' %}">
        <!-- Bootstrap + Steller main styles -->
        <link rel="stylesheet" href="{% static 'css/steller.css' %}">
        <!-- Google Fonts -->
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap">
        <script src="{% static 'vendors/jquery/jquery-3.4.1.js' %}"></script>
        <script src="{% static 'vendors/bootstrap/bootstrap.bundle.js' %}"></script>
        <!-- bootstrap 3 affix -->
        <script src="{% static 'vendors/bootstrap/bootstrap.affix.js' %}"></script>
        <!-- steller js -->
        <script src="{% static 'js/steller.js' %}"></script>
        <style>
            body {
                font-family: 'Nunito', sans-serif;
                color: #495057;
                background-color: #f8f9fa;
                margin: 0;
                padding: 0;
                overflow-x: hidden;
            }
            a {
                text-decoration: none;
            }
            .navbar {
                background-color: #003c50;
            }
            .navbar .nav-link,
            .navbar-brand,
            .active-class {
                color: #ffffff !important;
                text-decoration: none;
            }
            .navbar .nav-link:hover,
            .navbar-brand:hover,
            .active-class:hover {
                text-decoration: none;
            }
            .navbar-toggler {
                border-color: transparent;
                background-color: #3A819E;
            }
            .dropdown-menu {
                left: auto !important;
                right: 0 !important;
            }
            .page-footer {
                background-color: #003c50;
                color: white;
                padding: 20px 0;
                position: relative;
                bottom: 0;
                width: 100%;
                margin-top: 20px;
            }
            .page-footer p {
                margin: 0;
            }
            .socials .social-item {
                color: white;
                margin: 0 10px;
                font-size: 1.5rem;
            }
            .next-prayer-info {
                text-align: center;
                margin-bottom: 20px;
            }
            .prayer-times-container {
                max-width: 800px;
                margin: auto;
                padding: 20px;
                background: #ffffff;
                border-radius: 8px;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                overflow-x: auto;
            }
            .prayer-times-table {
                display: flex;
                flex-direction: column;
                gap: 10px;
            }
            .table-header {
                display: flex;
                justify-content: space-between;
                background: #003C50;
                color: #ffffff;
                padding: 10px;
                border-radius: 8px 8px 0 0;
            }
            .table-row {
                display: flex;
                justify-content: space-between;
                background-color: #f9f9f9;
                padding: 10px;
                border-bottom: 1px solid #eeeeee;
            }
            .table-row:last-child {
                border-radius: 0 0 8px 8px;
                border-bottom: none;
            }
            .schedule-table-container {
                overflow-x: auto;
            }
            .schedule-table {
                width: 100%;
                border-collapse: collapse;
                margin-top: 20px;
                min-width: 600px;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                border-radius: 8px;
            }
            .schedule-table th,
            .schedule-table td {
                border: 1px solid #ddd;
                padding: 8px;
                text-align: left;
            }
            .schedule-table th {
                background-color: #003C50;
                color: #ffffff;
            }
            .schedule-table td {
                background-color: #f9f9f9;
            }
            .important-announcements {
                margin-top: 20px;
            }
            .important-announcements ul {
                list-style-type: none;
                padding: 0;
            }
            .important-announcements li {
                margin-bottom: 10px;
            }
            .important-announcements a {
                color: #0066cc;
            }

            .card-title {
                color: #3A819E;
            }
 
            
            @media (max-width: 600px) {
                body {
                    padding: 10px;
                }
                .schedule-table th,
                .schedule-table td {
                    font-size: 14px;
                    padding: 6px;
                }
            }
            @keyframes fadeInDown {
                from {
                    opacity: 0;
                    transform: translateY(-20px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
        </style>
    </head>

<body data-spy="scroll" data-target=".navbar" data-offset="40" id="home">
<!-- Page navigation -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top" data-spy="affix" data-offset-top="0">
    <div class="container">
        <a class="navbar-brand" href="{% url 'index' %}">
            <img src="{% static 'imgs/My project.png' %}" alt="MSA logo" class="img-fluid" style="height: 65px; box-shadow: none; border: none; filter: none" />
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto align-items-center">
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'index' %}">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'team' %}">About</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Prayer times</a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="{% url 'prayer' %}">Fard Salah times</a>
                        <a class="dropdown-item" href="{% url 'jummah_prayer' %}">Jummah times</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://forms.gle/4fnLHrbCsi3hUFMi6">Subscribe</a>
                </li>
            </ul>
        </div>
    </div>
</nav>
<!-- End of page navigation -->


<br><br><br><br>
 
<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card" id="hadith-card">
                <!-- Hadith content will be injected here by JavaScript -->
                <div class="card-body">
                    <h5 class="card-title">Loading Hadith...</h5>
                </div>
            </div>
        </div>
    </div>
</div>

 
<br> 
<script>
    document.addEventListener("DOMContentLoaded", function() {
        fetch('https://random-hadith-generator.vercel.app/bukhari/')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok ' + response.statusText);
                }
                return response.json();
            })
            .then(data => {
                const hadithData = data.data;
                const hadithCard = document.getElementById('hadith-card');
                hadithCard.innerHTML = `
                    <div class="card-body">
                        <center> <h3 class="card-title">Hadith of the Day</h3> </center>
                        <p class="card-text"><b>${hadithData.header}</b> ${hadithData.hadith_english}</p>
                        <p class="card-text text-muted">Source: ${hadithData.book}, ${hadithData.chapterName} - ${hadithData.refno}</p>
                    </div>
                `;
            })
            .catch(error => {
                console.error('There has been a problem with your fetch operation:', error);
                const hadithCard = document.getElementById('hadith-card');
                hadithCard.innerHTML = `
                    <div class="card-body">
                        <center> <h3 class="card-title">Hadith of the Day</h3> </center>
                        <p class="card-text"><b>Sorry, an error occurred while fetching the Hadith. Please try again later.</b></p>
                    </div>
                `;
            });
    });
</script>





{% if next_prayer %}
<div class="next-prayer-info">
    <h4>Upcoming Time: {{ next_prayer.name|title }} - {{ next_prayer.time }}</h4>
    <p>Iqamah at TRU (OM 2479): {{ next_prayer.iqamah }}</p>
</div>
{% endif %}

<div class="row">
    <div class="prayer-times-container col-md-8">
        <h3>IQAMAH TIMES FOR TRU MUSALLA (OM 2494 & 2498)</h3>
        <br>
        <h3>Today's Prayer Times - {{ today|date:"F d, Y" }}</h3>
        <div class="prayer-times-table">
            <div class="table-header">
                <div>Prayer</div>
                <div style="margin-left:20px">Adhan Time</div>
                <div>Iqamah Time</div>
            </div>
            <div class="table-row">
                <div>Fajr</div>
                <div style="margin-left:32px">
                    {% if is_ramadan_today %}
                    {{ today_times.imsak }}
                    {% else %}
                    {{ today_times.fajr }}
                    {% endif %}
                </div>
                <div>{{ today_times.fajr_iqamah }}</div>
            </div>
            <div class="table-row">
                <div>Sunrise</div>
                <div style="margin-left:0px">{{ today_times.sunrise }}</div>
                <div>-----</div>
            </div>
            <div class="table-row">
                <div>Dhuhr</div>
                <div style="margin-left:14px">{{ today_times.dhuhr }}</div>
                <div>{{ today_times.dhuhr_iqamah }}</div>
            </div>
            <div class="table-row">
                <div>Asr</div>
                <div style="margin-left:33px">{{ today_times.asr }}</div>
                <div>{{ today_times.asr_iqamah }}</div>
            </div>
            <div class="table-row">
                <div>Maghrib</div>
                <div style="margin-left:1px">{{ today_times.maghrib }}</div>
                <div>{{ today_times.maghrib_iqamah }}</div>
            </div>
            <div class="table-row">
                <div>Isha</div>
                <div style="margin-left:30px">{{ today_times.isha }}</div>
                <div>{{ today_times.isha_iqamah }}</div>
            </div>
        </div>
        <br><br>
        <center>
            <h3>Monthly Prayer Times</h3>
        </center>
        <div style="display: flex; justify-content: center; margin-bottom: 20px;">
            <button class="btn btn-outline-info btn-lg" type="button" data-toggle="collapse" data-target="#monthlyPrayerTimes" aria-expanded="false" aria-controls="monthlyPrayerTimes">
                View the Monthly Prayer Times
            </button>
        </div>

        <div class="collapse" id="monthlyPrayerTimes">
            <div class="prayer-times-container">
                <h3>Monthly Prayer Times for {{ month_name }} {{ year }}</h3>
                <table class="schedule-table">
                    <thead>
                        <tr>
                            <th rowspan="2" style="border: 1px solid lightgrey;">Date</th>
                            <th rowspan="2" style="border: 1px solid lightgrey;"> Day</th>
                            <th colspan="3" style="border: 1px solid lightgrey;">Fajr</th>
                            <th colspan="2" style="border: 1px solid lightgrey;"> Dhuhr</th>
                            <th colspan="2" style="border: 1px solid lightgrey;">Asr</th>
                            <th colspan="2" style="border: 1px solid lightgrey;">Maghreb</th>
                            <th colspan="2" style="border: 1px solid lightgrey;">Isha</th>
                        </tr>
                        <tr style="border: 1px solid lightgrey;">
                            <th class="subheader" style="border: 1px solid lightgrey;">Athan</th>
                            <th class="subheader" style="border: 1px solid lightgrey;">Iqamah</th>
                            <th class="subheader" style="border: 1px solid lightgrey;">Sunrise</th>
                            <th class="subheader" style="border: 1px solid lightgrey;">Athan</th>
                            <th class="subheader" style="border: 1px solid lightgrey;">Iqamah</th>
                            <th class="subheader" style="border: 1px solid lightgrey;">Athan</th>
                            <th class="subheader" style="border: 1px solid lightgrey;">Iqamah</th>
                            <th class="subheader" style="border: 1px solid lightgrey;">Athan</th>
                            <th class="subheader" style="border: 1px solid lightgrey;">Iqamah</th>
                            <th class="subheader" style="border: 1px solid lightgrey;">Athan</th>
                            <th class="subheader" style="border: 1px solid lightgrey;">Iqamah</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for day in calendar_data %}
                        <tr class="{% if day.date.day == today.day and day.date.month == today.month and day.date.year == today.year %}current-day-row{% endif %}">
                            <td class="{% if day.date.day == today.day and day.date.month == today.month and day.date.year == today.year %}current-day-cell{% endif %}">{{ day.date|date:"d" }}</td>
                            <td class="{% if day.date.day == today.day and day.date.month == today.month and day.date.year == today.year %}current-day-cell{% endif %}">{{ day.date|date:"l" }}</td>
                            <td class="{% if day.date.day == today.day and day.date.month == today.month and day.date.year == today.year %}current-day-cell{% endif %}">{{ day.times.fajr }}</td>
                            <td class="{% if day.date.day == today.day and day.date.month == today.month and day.date.year == today.year %}current-day-cell{% endif %}">{{ day.times.fajr_iqamah }}</td>
                            <td class="{% if day.date.day == today.day and day.date.month == today.month and day.date.year == today.year %}current-day-cell{% endif %}">{{ day.times.sunrise }}</td>
                            <td class="{% if day.date.day == today.day and day.date.month == today.month and day.date.year == today.year %}current-day-cell{% endif %}">{{ day.times.dhuhr }}</td>
                            <td class="{% if day.date.day == today.day and day.date.month == today.month and day.date.year == today.year %}current-day-cell{% endif %}">{{ day.times.dhuhr_iqamah }}</td>
                            <td class="{% if day.date.day == today.day and day.date.month == today.month and day.date.year == today.year %}current-day-cell{% endif %}">{{ day.times.asr }}</td>
                            <td class="{% if day.date.day == today.day and day.date.month == today.month and day.date.year == today.year %}current-day-cell{% endif %}">{{ day.times.asr_iqamah }}</td>
                            <td class="{% if day.date.day == today.day and day.date.month == today.month and day.date.year == today.year %}current-day-cell{% endif %}">{{ day.times.maghrib }}</td>
                            <td class="{% if day.date.day == today.day and day.date.month == today.month and day.date.year == today.year %}current-day-cell{% endif %}">{{ day.times.maghrib_iqamah }}</td>
                            <td class="{% if day.date.day == today.day and day.date.month == today.month and day.date.year == today.year %}current-day-cell{% endif %}">{{ day.times.isha }}</td>
                            <td class="{% if day.date.day == today.day and day.date.month == today.month and day.date.year == today.year %}current-day-cell{% endif %}">{{ day.times.isha_iqamah }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="row">
            <div class="col-md-8 mx-auto">
                <div class="card bg-light">
                    <div class="card-body">
                        <h5 class="card-title text-center">Guideline for TRU Musalla (Multifaith room)</h5>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">There is no designated imam. Whoever is present at the times above may pray together.</li>
                            <li class="list-group-item">OM 2498 is a multi-faith prayer space that is generally available for Muslim students to use.</li>
                            <li class="list-group-item">If the room is locked or booked by another faith group, please refrain from accessing it at those times.</li>
                            <li class="list-group-item">Please, no knocking on the door.</li>
                            <li class="list-group-item">Private area (OM 2494) with separate entrance is available for sisters to use, behind the dividing walls.</li>
                            <li class="list-group-item">Please keep the prayer space clean and tidy.</li>
                            <li class="list-group-item">Please do not bring food or leave water bottles in this room.</li>
                            <li class="list-group-item">Please do not remove any Qurans or supplies from the room.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<br>
<center>
    <h3>Jummah Prayer Times</h3>
</center>
<div style="display: flex; justify-content: center; margin-bottom: 20px;">
    <a class="btn btn-outline-info btn-lg" href="{% url 'jummah_prayer' %}">
        View the JUMMAH Prayer Times
    </a>
</div>

<div class="heading-container">
    <h2><b>Find Prayer Room @ TRU-OM<b></h2>
</div>

<div class="row">
    <div class="col-md-6 instagram-embed-container" style="padding-right: 15px;">
        <iframe width="100%" height="315" src="https://www.youtube.com/embed/l1Z3be4F_cU?si=dEzPqoCDXWMY7IKG" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
    </div>
    <div class="col-md-6 instagram-embed-container" style="padding-left: 15px;">
        <iframe
            src="https://snazzymaps.com/embed/571406"
            width="100%"
            height="315"
            frameborder="0"
            style="border:0"
            allowfullscreen=""
            aria-hidden="false"
            tabindex="0">
        </iframe>
    </div>
</div>

<br>

<!-- Page Footer -->
<footer class="page-footer">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-sm-6">
                <p>
                    Copyright TRU MSA
                    <script>
                        document.write(new Date().getFullYear());
                    </script>
                </p>
            </div>
            <div class="col-sm-6">
                <div class="socials mt-4">
                    <a class="social-item" href="https://www.facebook.com/TRUMSA"><i class="ti-facebook"></i></a>
                    <a class="social-item" href="https://youtube.com/@trumsa"><i class="ti-youtube"></i></a>
                    <a class="social-item" href="https://www.instagram.com/tru_msa"><i class="ti-instagram"></i></a>
                    <a class="social-item" href="https://www.linkedin.com/company/trumsa/"><i class="ti-linkedin"></i></a>
                </div>
            </div>
        </div>
    </div>
</footer>
<!-- End of page footer -->

<script>
    document.addEventListener("DOMContentLoaded", (event) => {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) {
                    entry.target.classList.add("visible");
                }
            });
        });

        document.querySelectorAll(".custom-card").forEach((card) => {
            observer.observe(card);
        });
    });
</script>
</body>
</html>
